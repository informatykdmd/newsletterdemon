{% extends 'base.html' %}

{% block title %}DMD Panel Administratora - Zarządzanie Ogłoszeniami{% endblock %}

{% block addButton %}
<!-- dropdown -->
<div class="dropdown">
    <button class="nav-link dropdown-toggle link-light dark-mode" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown" aria-expanded="false">
        Oferta Najmu
    </button>
    <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="dropdownMenuButton2">
        <li><a class="estate_button dropdown-item active" href="/estate-ads-rent">Oferta Najmu</a></li>
        <li><a class="dropdown-item" href="/estate-ads-sell">Oferta Sprzedaży</a></li>
        <li><a class="dropdown-item" href="/estate-ads-special">Oferta Specjalna</a></li>
    </ul>
</div>
<!-- dropdown END -->

    <li style="margin-left: 15px;">
        <a  data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight"><i class="bi bi-plus-square-fill" style="font-size: 18pt; color: rgb(14, 144, 14) !important;"></i></a>
    </li>
{% endblock %}
{% block navbarTitle %}<a class="nav-link active dark-mode " aria-current="page" href="#">Zarządzanie Ogłoszeniami Najmu</a>{% endblock %}

{% block tableHeader %}
                        <div>
                            <div class="row klej formatuj-header">
                                <div class="d-none d-lg-block" style="max-width: 30px;">
                                    #
                                </div>
                                <div  class="col-xl-8 col-lg-6 col-sm-8">
                                    Tytuł
                                </div>
                                <div  class="d-none d-lg-block" style="max-width: 120px;">
                                    Cena
                                </div>
                                <div  class="d-none d-xl-block" style="max-width: 150px;">
                                    Lokalizacja
                                </div>
                                <div  class="d-none d-lg-block" style="max-width: 120px;">
                                    Status
                                </div>
                                <div  class="d-none d-xl-block" style="max-width: 250px;">
                                    Operator
                                </div>
                                <div  class="d-none d-lg-block" style="max-width: 150px;">
                                    Data publikacji
                                </div>
                                <div  class="text-end" style="max-width: 80px;">
                                    <i class="bi bi-person-gear"></i> Akcja 
                                </div>
                            </div>
                        </div>
{% endblock %}
{% block tableContent%}
                        <!-- OFFCANVANSE RIGHT ADD NEW POST -->
                        <div class="offcanvas offcanvas-end bg-dark oc-width" tabindex="-1" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
                            <div class="offcanvas-header">
                                <h4 class="offcanvas-title" id="offcanvasRightLabel">Dodawanie nowego ogłoszenia najmu.</h4>
                                <button type="button" class="btn-close btn-close-white"  data-bs-dismiss="offcanvas" aria-label="Close"></button>
                            </div>
                            <div class="offcanvas-body">
                                <form method="POST" id="rentOffer_9999999" action="{{ url_for('save_rent_offer') }}" enctype="multipart/form-data" >
                                    <!-- Tytuł artykułu -->
                                    <div class="mb-3">
                                        <label for="title_9999999" class="form-label">Tytuł ogłoszenia</label>
                                        <input 
                                                type="text" 
                                                value=""
                                                class="form-control bg-dark formatuj-maly-font" 
                                                style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                                id="title_9999999" 
                                                name="title_9999999" 
                                                required>
                                    </div>
                                    <!-- Informacje ogólne o nieruchomości -->
                                    <label class="form-label">Informacje ogólne o nieruchomości</label>
                                    <div class="mb-3">
                                        <input 
                                            type="text" 
                                            value=""
                                            class="form-control bg-dark formatuj-maly-font" 
                                            style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                            placeholder="Rodzaj Nieruchomości (dom, magazyn, biuro, mieszkanie, lokal usługowy, itp.)" 
                                            aria-label="Rodzaj Nieruchomości (dom, magazyn, biuro, mieszkanie, lokal usługowy, itp.)"
                                            id="RodzajNieruchomosci_9999999" 
                                            name="RodzajNieruchomosci_9999999" />
                                        <div class="no-border formatuj-maly-font fadeIn">
                                            <a class="ms-2" href="javascript:void(0);" onClick="fillInput('RodzajNieruchomosci_9999999', 'dom');">dom</a>
                                            <a class="ms-2" href="javascript:void(0);" onClick="fillInput('RodzajNieruchomosci_9999999', 'magazyn');">magazyn</a>
                                            <a class="ms-2" href="javascript:void(0);" onClick="fillInput('RodzajNieruchomosci_9999999', 'biuro');">biuro</a>
                                            <a class="ms-2" href="javascript:void(0);" onClick="fillInput('RodzajNieruchomosci_9999999', 'lokal usługowy');">lokal usługowy</a>
                                            <a class="ms-2" href="javascript:void(0);" onClick="fillInput('RodzajNieruchomosci_9999999', 'hala z biurem');">hala z biurem</a>
                                        </div>
                                    </div>
                                    <div class="input-group mb-0">
                                        <input 
                                            type="text" 
                                            value=""
                                            class="form-control bg-dark formatuj-maly-font" 
                                            style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                            id="Lokalizacja_9999999" 
                                            name="Lokalizacja_9999999" 
                                            required placeholder="Lokalizacja" aria-label="Lokalizacja" />
                                        <span class="input-group-text bg-dark" style="color:#c2c2c2; border:#6a6a6a solid 1px;"><i class="bi bi-geo-alt-fill"></i></span>
                                        <input 
                                            type="text" 
                                            value=""
                                            class="form-control bg-dark formatuj-maly-font" 
                                            style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                            id="LinkGPS_9999999" 
                                            name="LinkGPS_9999999" 
                                            placeholder="Link GPS" 
                                            aria-label="Link GPS" />
                                    </div>
                                    <div class="row">
                                        <div class="col-6 formatuj-maly-font fadeIn">
                                            <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Lokalizacja_9999999', 'Stare Babice');">Stare Babice</a>
                                            <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Lokalizacja_9999999', 'Warszawa');">Warszawa</a>
                                            <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Lokalizacja_9999999', 'Izabelin');">Izabelin</a>
                                            <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Lokalizacja_9999999', 'Warszawa Bielany');">Warszawa Bielany</a>
                                            <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Lokalizacja_9999999', 'Warszawa Bemowo');">Warszawa Bemowo</a>
                                        </div>
                                        <div class="col col-6 formatuj-maly-font" >
                                            <div id='GPS_9999999' class="text-end formatuj-maly-font text-primary-emphasis ">
                                                <!-- muszę wybrać z tego diva wygenerowane lat i lon -->
                                            </div>
                                            <div class="mb-3 text-end">
                                                <a href="javascript:void(0);" onclick="openGoogleEarthAddress('Lokalizacja_9999999')" class="formatuj-maly-font">
                                                    Otwórz mapę żeby pobrać link dla GPS
                                                </a>
                                            </div>
                                            <script>
                                                document.addEventListener('DOMContentLoaded', () => {
                                                    var inputElement = document.getElementById('LinkGPS_9999999');
                                                    inputElement.addEventListener('input', function() {
                                                        extractAndDisplayCoords('LinkGPS_9999999', 'GPS_9999999', '9999999');
                                                    });
                                                });
                                            </script>
                                        </div>
                                    </div>
                                    <div class="row g-2 mb-3">
                                        <div class="col-sm-2">
                                            <input 
                                                type="number" 
                                                class="form-control bg-dark formatuj-maly-font" 
                                                style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                                id="RokBudowy_9999999" 
                                                name="RokBudowy_9999999" 
                                                placeholder="Rok Budowy" 
                                                aria-label="Rok Budowy"/>
                                            <div class="no-border formatuj-maly-font fadeIn">
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('RokBudowy_9999999', '1980');">1980</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('RokBudowy_9999999', '2000');">2000</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('RokBudowy_9999999', '2020');">2020</a>
                                            </div>
                                        </div>
                                        <div class="col-sm">
                                            <input 
                                                type="text" 
                                                class="form-control bg-dark formatuj-maly-font" 
                                                style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                                id="StanWykonczenia_9999999" 
                                                name="StanWykonczenia_9999999" 
                                                placeholder="Stan Wykończenia" 
                                                aria-label="Stan Wykończenia">
                                            <div class="no-border formatuj-maly-font fadeIn">
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('StanWykonczenia_9999999', 'Wysoki standard');">Wysoki standard</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('StanWykonczenia_9999999', 'Deweloperski');">Deweloperski</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('StanWykonczenia_9999999', 'Pod Klucz');">Pod Klucz</a>
                                            </div>
                                        </div>
                                        
                                    </div>
                                    <div class="mb-3">
                                        <label for="NumerKW_9999999" class="form-label">Numer KW</label>
                                        <input 
                                            type="text" 
                                            value=""
                                            class="form-control bg-dark formatuj-maly-font" 
                                            style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                            id="NumerKW_9999999" 
                                            name="NumerKW_9999999" 
                                            >
                                    </div>
                                    
                                    <label class="form-label">Szczegóły wynajmu</label>
                                    <div class="row row-cols-3 mb-3">
                                        <div class="col-sm-4">
                                            <div class="input-group ">
                                                <span class="input-group-text bg-dark" style="color:#c2c2c2; border:#6a6a6a solid 1px;"><i class="bi bi-cash"></i></span>
                                                <input 
                                                    type="number" 
                                                    value=""
                                                    class="form-control bg-dark formatuj-maly-font" 
                                                    style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                                    id="Cena_9999999" 
                                                    name="Cena_9999999" 
                                                    placeholder="Cena" 
                                                    aria-label="Cena" />
                                                <span class="input-group-text bg-dark" style="color:#c2c2c2; border:#6a6a6a solid 1px;">.00</span>
                                            </div>
                                            <div class="no-border formatuj-maly-font fadeIn">
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Cena_9999999', '5000');">5000</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Cena_9999999', '10000');">10 000</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Cena_9999999', '15000');">15 000</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Cena_9999999', '20000');">20 000</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Cena_9999999', '25000');">25 000</a>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="input-group ">
                                                <span class="input-group-text bg-dark" style="color:#c2c2c2; border:#6a6a6a solid 1px;"><i class="bi bi-cash"></i></span>
                                                <input 
                                                    type="number" 
                                                    value=""
                                                    class="form-control bg-dark formatuj-maly-font" 
                                                    style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                                    id="Czynsz_9999999" 
                                                    name="Czynsz_9999999" 
                                                    placeholder="Czynsz" 
                                                    aria-label="Czynsz" />
                                                <span class="input-group-text bg-dark" style="color:#c2c2c2; border:#6a6a6a solid 1px;">.00</span>
                                            </div>
                                            <div class="no-border formatuj-maly-font fadeIn">
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Czynsz_9999999', '5000');">5000</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Czynsz_9999999', '10000');">10 000</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Czynsz_9999999', '15000');">15 000</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Czynsz_9999999', '20000');">20 000</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Czynsz_9999999', '25000');">25 000</a>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="input-group ">
                                                <span class="input-group-text bg-dark" style="color:#c2c2c2; border:#6a6a6a solid 1px;"><i class="bi bi-cash"></i></span>
                                                <input 
                                                    type="number" 
                                                    value=""
                                                    class="form-control bg-dark formatuj-maly-font" 
                                                    style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                                    id="Kaucja_9999999" 
                                                    name="Kaucja_9999999" 
                                                    placeholder="Kaucja" 
                                                    aria-label="Kaucja" />
                                                <span class="input-group-text bg-dark" style="color:#c2c2c2; border:#6a6a6a solid 1px;">.00</span>
                                            </div>
                                            <div class="no-border formatuj-maly-font fadeIn">
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Kaucja_9999999', '5000');">5000</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Kaucja_9999999', '10000');">10 000</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Kaucja_9999999', '15000');">15 000</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Kaucja_9999999', '20000');">20 000</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Kaucja_9999999', '25000');">25 000</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row row-cols-2 mb-3">
                                        <div class="col-sm-6">
                                            <div class="input-group">
                                                <input 
                                                    type="number" 
                                                    value=""
                                                    class="form-control bg-dark formatuj-maly-font" 
                                                    style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                                    id="Metraz_9999999" 
                                                    name="Metraz_9999999" 
                                                    placeholder="Metraż" 
                                                    aria-label="Metraż" />
                                                <span 
                                                    class="input-group-text bg-dark formatuj-maly-font" 
                                                    style="color:#c2c2c2; border:#6a6a6a solid 1px;">
                                                    m&sup2;
                                                </span>
                                            </div>
                                            <div class="no-border formatuj-maly-font fadeIn">
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Metraz_9999999', '50');">50 m&sup2;</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Metraz_9999999', '100');">100 m&sup2;</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Metraz_9999999', '150');">150 m&sup2;</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Metraz_9999999', '250');">250 m&sup2;</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('Metraz_9999999', '500');">500 m&sup2;</a>
                                            </div>
                                            
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="input-group">
                                                <input 
                                                    type="number" 
                                                    value=""
                                                    class="form-control bg-dark formatuj-maly-font" 
                                                    style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                                    id="PowierzchniaDzialki_9999999" 
                                                    name="PowierzchniaDzialki_9999999" 
                                                    placeholder="Powierzchnia Działki" 
                                                    aria-label="Powierzchnia Działki" />
                                                <span 
                                                    class="input-group-text bg-dark formatuj-maly-font" 
                                                    style="color:#c2c2c2; border:#6a6a6a solid 1px;">
                                                    m&sup2;
                                                </span>
                                            </div>
                                            <div class="no-border formatuj-maly-font fadeIn">
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('PowierzchniaDzialki_9999999', '500');">500 m&sup2;</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('PowierzchniaDzialki_9999999', '1000');">1000 m&sup2;</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('PowierzchniaDzialki_9999999', '2500');">2500 m&sup2;</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('PowierzchniaDzialki_9999999', '7500');">7500 m&sup2;</a>
                                                <a class="ms-2" href="javascript:void(0);" onClick="fillInput('PowierzchniaDzialki_9999999', '10000');">10 000 m&sup2;</a>
                                            </div>
                                        </div>
                                    </div>
                                    <label class="form-label">Szczegóły budynku</label>
                                    <div class="row g-2 mb-3">
                                        <div class="col-sm-2">
                                            <input 
                                                type="number" 
                                                class="form-control bg-dark formatuj-maly-font" 
                                                style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                                id="LiczbaPieter_9999999" 
                                                name="LiczbaPieter_9999999" 
                                                placeholder="Liczba Pięter" 
                                                aria-label="Liczba Pięter"/>
                                        </div>
                                        <div class="col-sm-2">
                                            <input 
                                                type="number" 
                                                class="form-control bg-dark formatuj-maly-font" 
                                                style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                                id="LiczbaPokoi_9999999" 
                                                name="LiczbaPokoi_9999999" 
                                                placeholder="Liczba Pokoi" 
                                                aria-label="Liczba Pokoi"/>
                                        </div>
                                    </div>
                                    <div class="input-group mb-3">
                                        <input 
                                            type="text" 
                                            value=""
                                            class="form-control bg-dark formatuj-maly-font" 
                                            style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                            id="TechnologiaBudowy_9999999" 
                                            name="TechnologiaBudowy_9999999" 
                                            required placeholder="Technologia Budowy" aria-label="Technologia Budowy"
                                        >
                                        <span class="input-group-text bg-dark" style="color:#c2c2c2; border:#6a6a6a solid 1px;"><i class="bi bi-house-gear"></i></span>
                                        <input 
                                            type="text" 
                                            value=""
                                            class="form-control bg-dark formatuj-maly-font" 
                                            style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                            id="RodzajZabudowy_9999999" 
                                            name="RodzajZabudowy_9999999" 
                                            placeholder="Rodzaj Zabudowy" aria-label="Rodzaj Zabudowy"
                                        >
                                    </div>
                                    <div class="input-group mb-3">
                                        <input 
                                            type="text" 
                                            value=""
                                            class="form-control bg-dark formatuj-maly-font" 
                                            style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                            id="Umeblowanie_9999999" 
                                            name="Umeblowanie_9999999" 
                                            required placeholder="Umeblowanie" aria-label="Umeblowanie"
                                        >
                                        <span class="input-group-text bg-dark" style="color:#c2c2c2; border:#6a6a6a solid 1px;"><i class="bi bi-house-heart"></i></span>
                                        <input 
                                            type="text" 
                                            value=""
                                            class="form-control bg-dark formatuj-maly-font" 
                                            style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                            id="FormaKuchni_9999999" 
                                            name="FormaKuchni_9999999" 
                                            placeholder="Forma Kuchni" aria-label="Forma Kuchni"
                                        >
                                    </div>

                                    <label class="form-label">Dodatkowe informacje</label>
                                    <div class="input-group mb-3">
                                        <textarea 
                                            class="form-control bg-dark formatuj-maly-font" 
                                            style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                            id="InformacjeDodatkowe_9999999" 
                                            name="InformacjeDodatkowe_9999999" 
                                            rows="4" required></textarea>
                                    </div>

                                    <!-- Opis --> 
                                    <div class="mb-3" id="list-container-parrent9999999">
                                        <label for="list-container9999999" class="form-label">Opis Nieruchomości</label>
                                        <!-- class="no-border" -->
                                        <div id="list-container9999999" >
                                            <!-- Tutaj będą dynamicznie dodawane elementy listy -->
                                        </div>
                                        <div class="formatuj-right formatuj-margin">
                                            <button type="button" class="btn btn-outline-secondary add-button" onclick="addCustomElement('9999999', 'p', '')">
                                                <i class="bi bi-textarea-t"></i>
                                            </button>
                                            <button type="button" class="btn btn-outline-secondary add-button" onclick="addCustomElement('9999999', 'strong', '')">
                                                <i class="bi bi-type-bold"></i><i class="bi bi-textarea-t"></i>
                                            </button>
                                            <button type="button" class="btn btn-outline-secondary add-button" onclick="addCustomElement('9999999', 'h1', '')">
                                                <i class="bi bi-menu-app"></i>                                          
                                            </button>
                                            <button type="button" class="btn btn-outline-secondary add-button" onclick="addCustomElement('9999999', 'h2', '')">
                                                <i class="bi bi-menu-button"></i>
                                            </button>
                                            <button type="button" class="btn btn-outline-secondary add-button" onclick="addCustomElement('9999999', 'h3', '')">
                                                <i class="bi bi-menu-button-wide"></i>
                                            </button>
                                            <button type="button" class="btn btn-outline-secondary add-button" onclick="addCustomElement('9999999', 'h1-strong', '')">
                                                <i class="bi bi-menu-app-fill"></i>
                                            </button>
                                            <button type="button" class="btn btn-outline-secondary add-button" onclick="addCustomElement('9999999', 'h2-strong', '')">
                                                <i class="bi bi-menu-button-fill"></i>
                                            </button>
                                            <button type="button" class="btn btn-outline-secondary add-button" onclick="addCustomElement('9999999', 'h3-strong', '')">
                                                <i class="bi bi-menu-button-wide-fill"></i>
                                            </button>
                                            <button type="button" class="btn btn-outline-secondary add-list-item-button" onclick="addCustomElement('9999999', 'li', '')">
                                                <i class="bi bi-card-text"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <script>
                                        addCustomElement('9999999', 'p', '');
                                    </script>


                                    <!-- moduł dropboxa -->
                                    <label class="form-label">Zdjęcia Nieruchomości</label>
                                    <div id="9999999-drop-area" class="drop-area">
                                        <h3>Przeciągnij (max 10) zdjęcia tutaj</h3>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label ms-5">Pliki do wysłania:</label>
                                        <ul id="9999999-fileList" class="list-group ms-5 me-5"></ul>
                                    </div>
                                    <script>
                                        document.addEventListener('DOMContentLoaded', () => {
                                            const myFotoDropBox = new FotoDropBox('9999999');
                                        });
                                    </script>
                                    <input type="hidden" name="UserName" id="UserName_9999999" value="{{username}}"/>
                                    <!-- Przycisk Zapisz artykuł -->
                                    <button 
                                        type="button" 
                                        class="btn btn-success btn-sm" 
                                        style="max-height: 30px; font-size: 12px;" 
                                        onclick="prepareAndSubmitRentOfferForm('9999999', false)"
                                    >
                                        Dodaj ogłoszenie najmu
                                    </button>
                                </form>
                            </div>
                        </div>


                        {% for post_data in ads_rent %}
                            {% set post_id  = post_data['ID'] %}
                        <!-- linia contentu tabeli ciemna-->
                        <div>
                            <div class="row klej {% if loop.index is even %}formatuj-light-line{% else %}formatuj-dark-line{% endif %}" >
                                <div class="d-none d-lg-block" style="max-width: 30px;" data-bs-toggle="collapse" href="#collapse_id_{{post_id}}" role="button" aria-expanded="false" aria-controls="collapse_id_{{post_id}}">
                                    {{post_id}}
                                </div>
                                <div class="d-lg-none" style="max-width: 30px;" data-bs-toggle="collapse" href="#collapse_id_{{post_id}}" role="button" aria-expanded="false" aria-controls="collapse_id_{{post_id}}">
                                    {% if post_data['StatusOferty'] == 1 %}
                                        <span class="d-none d-md-block d-lg-none"> <i class="bi bi-lightbulb-fill text-warning"></i></span>
                                    {% else %}
                                        <span class="d-none d-md-block d-lg-none"> <i class="bi bi-lightbulb-fill text-secondary"></i></span>
                                    {% endif %}
                                </div>
                                <div  class="col-xl-8 col-md-8 col-sm-10" data-bs-toggle="collapse" href="#collapse_id_{{post_id}}" role="button" aria-expanded="false" aria-controls="collapse_id_{{post_id}}">
                                    <a data-bs-toggle="collapse" href="#collapse_id_{{post_id}}" role="button" aria-expanded="false" aria-controls="collapse_id_{{post_id}}">
                                        {{post_data['Tytul']}}
                                    </a>
                                    
                                </div>
                                <div  class="d-none d-lg-block"  style="max-width: 120px;" data-bs-toggle="collapse" href="#collapse_id_{{post_id}}" role="button" aria-expanded="false" aria-controls="collapse_id_{{post_id}}">
                                    <a data-bs-toggle="collapse" href="#collapse_id_{{post_id}}" role="button" aria-expanded="false" aria-controls="collapse_id_{{post_id}}">
                                        <span class="display-6 formatuj-maly-font">{{post_data['Cena']}} PLN</span>
                                    </a>
                                </div>
                                <div  class="d-none d-xl-block"  style="max-width: 150px;" data-bs-toggle="collapse" href="#collapse_id_{{post_id}}" role="button" aria-expanded="false" aria-controls="collapse_id_{{post_id}}">
                                    <a data-bs-toggle="collapse" href="#collapse_id_{{post_id}}" role="button" aria-expanded="false" aria-controls="collapse_id_{{post_id}}">
                                        <span class="display-6 formatuj-maly-font">{{post_data['Lokalizacja'][:12]}}</span>
                                    </a>
                                </div>
                                <div  class="d-none d-lg-block" style="max-width: 120px;" data-bs-toggle="collapse" href="#collapse_id_{{post_id}}" role="button" aria-expanded="false" aria-controls="collapse_id_{{post_id}}">
                                    <a data-bs-toggle="collapse" href="#collapse_id_{{post_id}}" role="button" aria-expanded="false" aria-controls="collapse_id_{{post_id}}">
                                        {% if post_data['StatusOferty'] == 1 %}
                                            <span class="text-warning">Aktywna</span>
                                        {% else %}
                                        <span class="text-secondary">Nieaktywna</span>
                                        {% endif %}
                                    </a>
                                </div>
                                <div  class="d-none d-xl-block" style="max-width: 250px;" data-bs-toggle="collapse" href="#collapse_id_{{post_id}}" role="button" aria-expanded="false" aria-controls="collapse_id_{{post_id}}">
                                    {% if post_data['EmailKontaktowy'] != '' %}
                                    <a data-bs-toggle="collapse" href="#collapse_id_{{post_id}}" role="button" aria-expanded="false" aria-controls="collapse_id_{{post_id}}">
                                        <span class="text-secondary formatuj-maly-font">{{post_data['EmailKontaktowy']}}</span>
                                    </a>
                                    {% else %}
                                    <a data-bs-toggle="collapse" href="#collapse_id_{{post_id}}" role="button" aria-expanded="false" aria-controls="collapse_id_{{post_id}}">
                                        <span class="text-secondary">Brak</span>
                                    </a>
                                    {% endif %}
                                </div>
                                <div class="d-none d-lg-block" style="max-width: 150px;" data-bs-toggle="collapse" href="#collapse_id_{{post_id}}" role="button" aria-expanded="false" aria-controls="collapse_id_{{post_id}}">
                                    <a data-bs-toggle="collapse" href="#collapse_id_{{post_id}}" role="button" aria-expanded="false" aria-controls="collapse_id_{{post_id}}">
                                        <span class="display-6 formatuj-maly-font">{{post_data['DataUtworzenia']}}</span>
                                    </a>
                                </div>
                                <div class="text-end" style="max-width: 80px;">
                                    
                                    <form method="POST" id="removePost_{{post_id}}" action="{{ url_for('remove_post') }}" enctype="multipart/form-data" onsubmit="return confirm('Czy na pewno chcesz usunąć ofertę?');">

                                        <a data-bs-toggle="collapse" href="#collapse_id_{{post_id}}" role="button" aria-expanded="false" aria-controls="collapse_id_{{post_id}}"><i class="bi bi-chevron-double-down" style="color: rgb(89, 176, 90) !important;"></i></a>

                                        <a data-bs-toggle="offcanvas" data-bs-target="#offcanvasScrolling_{{post_id}}" aria-controls="offcanvasScrolling_{{post_id}}"><i class="bi bi-pencil" style="color: #7eb5cc !important;"></i></a>
                                        <input type="hidden" name="UserName" id="UserName_{{post_id}}" value="{{username}}"/>
                                        <input type="hidden" name="PostID" id="PostID_{{post_id}}" value="{{post_id}}"/>
                                        <button type="submit" class="custom-icon-button"><i class="bi bi-trash-fill" style="color: rgb(149, 47, 47) !important;"></i></button>
                                        <!-- <a href="#"><i class="bi bi-trash-fill" style="color: rgb(149, 47, 47) !important;"></i></a> -->
                                    </form>
                                </div>
                            </div>
                        </div>
                        <!-- offcanvanse left -->
                        <div class="offcanvas offcanvas-start bg-dark oc-width" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="offcanvasScrolling_{{post_id}}" aria-labelledby="offcanvasScrollingLabel">
                            <div class="offcanvas-header">
                              <h4 class="offcanvas-title" id="offcanvasScrollingLabel">Edycja Ogłoszenia Najmu id: {{post_id}}</h4>
                              <button type="button" class="btn-close btn-close-white"  data-bs-dismiss="offcanvas" aria-label="Close"></button>
                            </div>
                            <div class="offcanvas-body formatuj-maly-font">
                                <div class="tylko-klej">
                                    <div style="color:#6a6a6a;">
                                        <form method="POST" id="editPost_{{post_id}}" action="{{ url_for('save_post') }}" enctype="multipart/form-data">
                                            <!-- Tytuł artykułu -->
                                            <div class="mb-3">
                                            <label for="title_{{post_id}}" class="form-label">Tytuł artykułu</label>
                                            <input 
                                                    type="text" 
                                                    value="{{post_data['Tytul']}}"
                                                    class="form-control bg-dark formatuj-maly-font" 
                                                    style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                                    id="title_{{post_id}}" 
                                                    name="title_{{post_id}}" 
                                                    required>
                                            </div>
    
                                            <!-- Wstęp -->
                                            <div class="mb-3">
                                            <label for="introduction_{{post_id}}" class="form-label">TypNieruchomosci</label>
                                            <textarea 
                                                    class="form-control bg-dark formatuj-maly-font" 
                                                    style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                                    id="introduction_{{post_id}}" 
                                                    name="introduction_{{post_id}}" 
                                                    rows="4" required>{{post_data['TypNieruchomosci']}}</textarea>
                                            </div>
    
                                            <!-- Highlight -->
                                            <div class="mb-3">
                                            <label for="highlight_{{post_id}}" class="form-label">Rodzaj</label>
                                            <textarea 
                                                    class="form-control bg-dark formatuj-maly-font" 
                                                    style="color:#c2c2c2; border:#6a6a6a solid 1px;"
                                                    id="Highlight_{{post_id}}" 
                                                    name="Highlight_{{post_id}}" 
                                                    rows="4" required>{{post_data['Rodzaj']}}</textarea>
                                            </div>
    
                                            <!-- Main Foto -->
                                            <div class="mb-3">
                                                <label for="mainFoto_{{post_id}}" class="form-label">Main Foto (1920x750)</label>
                                                <div>
                                                    <img src="{{post_data['Zdjecia'][0]}}" style="max-height: 100px; max-width: 400px; border-radius: 10px; margin-bottom: 10px;" id="mainFotoPreview_{{post_id}}" />
                                                </div>
                                                <div>
                                                    <input type="file" class="form-control bg-dark formatuj-maly-font" style="color:#c2c2c2;" id="mainFoto_{{post_id}}" name="mainFoto_{{post_id}}" accept="image/*" onchange="previewImage(this, 'mainFotoPreview_{{post_id}}', 1920, 750, 3)">
                                                </div>
                                            </div>
    
                                            <!-- Content Foto -->
                                            <div class="mb-3">
                                                <label for="contentFoto_{{post_id}}" class="form-label">Content Foto (750x430)</label>
                                                <div>
                                                    <img src="{{post_data['Zdjecia'][1]}}" style="max-height: 100px; max-width: 400px; border-radius: 10px; margin-bottom: 10px;" id="contentFotoPreview_{{post_id}}" />
                                                </div>  
                                                <div>
                                                    <input type="file" class="form-control bg-dark formatuj-maly-font" style="color:#c2c2c2;" id="contentFoto_{{post_id}}" name="contentFoto_{{post_id}}" accept="image/*" onchange="previewImage(this, 'contentFotoPreview_{{post_id}}', 750, 430, 3)">
                                                </div>
                                            </div>
    
                                            <!-- Additional List -->
                                            <div class="mb-3">
                                                <label for="additionalList{{post_id}}" class="form-label">Additional List</label>
                                                <div id="list-container{{post_id}}" class="no-border">
                                                    <!-- Tutaj będą dynamicznie dodawane elementy listy -->
                                                </div>
                                                <div class="formatuj-right formatuj-margin">
                                                    <button type="button" class="btn btn-warning btn-sm" onclick="addListItem('{{post_id}}')">Dodaj pole</button>
                                                </div>
                                            </div>
                                            <script>
                                                var additionalList = "{{post_data['InformacjeDodatkowe']}}";
                                                var idAddionalList = '{{post_id}}';
                                                console.log(idAddionalList);
                                                addListFields(additionalList, idAddionalList, " ");
                                            </script>
    
                                            <!-- Tags -->
                                            <div class="mb-3">
                                                <label for="tags{{post_id}}" class="form-label">Tags</label>
                                                <div id="list-tag-container{{post_id}}" class="no-border">
                                                    <!-- Tutaj będą dynamicznie dodawane elementy listy -->
                                                </div>
                                                <div class="formatuj-right formatuj-margin">
                                                    <button 
                                                            type="button" 
                                                            class="btn btn-warning btn-sm" 
                                                            onclick="addListItem(
                                                                                '{{post_id}}', 
                                                                                'dynamicTagsField',
                                                                                'input',
                                                                                'form-control bg-dark formatuj-maly-font',
                                                                                'additionalTagList',
                                                                                '4',
                                                                                '#c2c2c2',
                                                                                '#6a6a6a solid 1px',
                                                                                true,
                                                                                'no-border formatuj-margin form-control bg-dark formatuj-right',
                                                                                'list-tag-container',
                                                                                'btn btn-outline-danger formatuj-maly-font formatuj-margin',
                                                                                'Usuń tag'
                                                                                )">
                                                        Dodaj Tag
                                                    </button>
                                                </div>
                                                <!-- <input type="text" value="{{post_data['tags']}}" class="form-control bg-dark formatuj-maly-font" style="color:#c2c2c2; border:#6a6a6a solid 1px;" id="tags" name="tags" required> -->
                                            </div>
                                            <script>
                                                var additionalTagList = "{{post_data['InformacjeDodatkowe']}}";
                                                var idAddionalTagList = '{{post_id}}';
                                                addListFields(
                                                                additionalTagList, 
                                                                idAddionalTagList, 
                                                                ", ", 
                                                                "dynamicTagsField",
                                                                'input', 
                                                                "form-control bg-dark formatuj-maly-font",
                                                                'tags', 
                                                                '4',
                                                                "#c2c2c2",
                                                                "#6a6a6a solid 1px",
                                                                true,
                                                                "no-border formatuj-margin form-control bg-dark formatuj-right",
                                                                "list-tag-container",
                                                                "btn btn-outline-danger formatuj-maly-font formatuj-margin",
                                                                "Usuń Tag"
                                                                );
                                            </script>

                                            <!-- Category -->
                                            <div class="mb-3">
                                                <label for="category_{{post_id}}" class="form-label">Kategoria</label>
                                                <input type="text" value="{{post_data['Rodzaj']}}" class="form-control bg-dark formatuj-maly-font" style="color:#c2c2c2; border:#6a6a6a solid 1px;" id="category_{{post_id}}" name="category_{{post_id}}" required>
                                            </div>
                                            <!-- Ukryte pola formularza -->
                                            <input type="hidden" name="tagsFieldData_{{post_id}}" id="tagsFieldData_{{post_id}}" />
                                            <input type="hidden" name="dynamicFieldData_{{post_id}}" id="dynamicFieldData_{{post_id}}" />
                                            <input type="hidden" name="UserName_{{post_id}}" id="UserName_{{post_id}}" value="{{username}}"/>
                                            
                                            <!-- Przycisk Zapisz artykuł -->
                                            <button type="button" class="btn btn-success btn-sm" style="max-height: 30px; font-size: 12px;" onclick="prepareAndSubmitForm('{{post_id}}', true)">Zapisz artykuł</button>
                                            <!-- <button type="submit" class="btn btn-success btn-sm" style="max-height: 30px; font-size: 12px;" onclick="joinListFields('{{post_id}}', ', ', 'dynamicTagsField'); joinListFields('{{post_id}}', '#splx ', 'dynamicField')">Zapisz artykuł</button> -->
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                       
                        <!-- collapse start -->

                        <div class="sub-panel rogi collapse formatyj-maly-wiersz p-2" id="collapse_id_{{post_id}}">

                            <div class="row">
                                <div class="col-lg-4 col-sm-12">
                                    <img src="{{post_data['mainFoto']}}" alt="" class="img-thumbnail object-fit-cover rounded bg-dark mb-2" >
                                    <div class="row row-cols-4">
                                        {% for foto in post_data['Zdjecia'][1:] %}
                                        <div class="col">
                                            <img src="{{foto}}" alt="" class="img-thumbnail object-fit-cover rounded bg-dark" >
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                                <div class="col-lg-4 col-sm-12">
                                    <h5>{{post_data['Tytul']}}</h5>
                                    <h4 class="text-secondary">Opis</h4>
                                    {% for item in post_data['Opis'] %}
                                        {% for key, val in item.items() %}
                                            {% if key=='li' %}
                                                <ul>
                                                    {% for li_item in val %}
                                                        <li>{{li_item|decode_html_entities_filter|update_new_line_chars}}</li>
                                                    {% endfor %}
                                                </ul>
                                            {% else %}
                                                {% set decoded_val = val|decode_html_entities_filter|update_new_line_chars %}
                                                {% if key=='p' %}
                                                    <p class='text-secondary'>{{decoded_val}}</p>
                                                {% endif %}
                                                {% if key=='strong' %}
                                                    <strong class='text-secondary'>{{decoded_val}}</strong>
                                                {% endif %}
                                                {% if key=='h1' %}
                                                    <h1 class='text-secondary'>{{decoded_val}}</h1>
                                                {% endif %}
                                                {% if key=='h1-strong' %}
                                                    <h1 class='text-secondary'><strong>{{decoded_val}}</strong></h1>
                                                {% endif %}
                                                {% if key=='h2' %}
                                                    <h2 class='text-secondary'>{{decoded_val}}</h2>
                                                {% endif %}
                                                {% if key=='h2-strong' %}
                                                    <h2 class='text-secondary'><strong>{{decoded_val}}</strong></h2>
                                                {% endif %}
                                                {% if key=='h3' %}
                                                    <h3 class='text-secondary'>{{decoded_val}}</h3>
                                                {% endif %}
                                                {% if key=='h3-strong' %}
                                                    <h3 class='text-secondary'><strong>{{decoded_val}}</strong></h3>
                                                {% endif %}
                                            
                                                
                                            {% endif %}
                                        {% endfor %}
                                    {% endfor %}
                                    <p class="h3"><i class="bi bi-database-fill-check text-warning"></i> {{post_data['Cena']}} PLN</p>
                                    <div class="ms-2">
                                        <form action="{{ url_for('update_rent_offer_status') }}" id="statusUser_{{post_id}}" method="POST" enctype="multipart/form-data">
                                            <input type="hidden" name="id" value="{{post_id}}" />
                                            <input type="hidden" name="status" value="active" />
                                            <div class="row row-cols-auto ">
                                                {% if post_data['StatusOferty'] == 1 %}
                                                <div class="col formatuj-padding">
                                                    <button type="submit" class="btn btn-outline-danger btn-sm" style="max-height: 30px; font-size: 12px;" onclick>Dezaktywuj</button>
                                                </div>
                                                {% else %}
                                                <div class="col formatuj-padding">
                                                    <button type="submit" class="btn btn-outline-success btn-sm" style="max-height: 30px; font-size: 12px;" onclick>Aktywuj</button>
                                                </div>
                                                {% endif %}
                                                <div class="col formatuj-padding">
                                                    <button type="submit" class="btn btn-outline-secondary btn-sm" style="max-height: 30px; font-size: 12px;" onclick>Publikuj na Marketplace</button>
                                                </div>
                                                <div class="col formatuj-padding">
                                                    <button type="submit" class="btn btn-outline-danger btn-sm" style="max-height: 30px; font-size: 12px;" onclick>Usuń z OLX</button>
                                                </div>
                                                <div class="col formatuj-padding">
                                                    <button type="submit" class="btn btn-outline-secondary btn-sm" style="max-height: 30px; font-size: 12px;" onclick>Publikuj na OTO DOM</button>
                                                </div>
                                                <div class="col formatuj-padding">
                                                    <button type="submit" class="btn btn-outline-success btn-sm" style="max-height: 30px; font-size: 12px;" onclick>Publikuj na Allegro Lokalnie</button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-sm-12">
                                    
                                    <div class="row-cols-1 ">
                                        <div class="col">
                                            <div class="border border-1 border-secondary rounded m-1 p-2 formatuj-hover">
                                                <div class="mb-2">
                                                    <span class="text-light fw-light">Rodzaj Oferty</span>
                                                </div>
                                                <div class="ms-3 formatuj-maly-font">
                                                    <i class="bi bi-house-check text-success"></i> 
                                                    <span class="text-secondary fw-lighter">Oferta Wynajmu</span>
                                                </div>
                                            </div>
                                        </div>
                                        {% if post_data['Lokalizacja']!='' %}
                                        <div class="col">
                                            <div class="border border-1 border-secondary rounded m-1 p-2 formatuj-hover">
                                                <div class="mb-2">
                                                    <span class="text-light fw-light">Lokalizacja</span>
                                                </div>
                                                <div class="ms-3 formatuj-maly-font">
                                                    <i class="bi bi-geo text-success"></i>
                                                    <span class="text-secondary fw-lighter">{{post_data['Lokalizacja']}} </span>
                                                    {% if post_data['GPS']!={} %}
                                                    <span class="text-secondary fw-lighter"><i class="bi bi-globe2"></i> {{post_data['GPS']['latitude']}} </span>
                                                    <span class="text-secondary fw-lighter"><i class="bi bi-globe2"></i> {{post_data['GPS']['longitude']}} </span>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                        {% if post_data['InformacjeDodatkowe']!='' %}
                                        <div class="col">
                                            <div class="border border-1 border-secondary rounded m-1 p-2 formatuj-hover">
                                                <div class="mb-2">
                                                    <span class="text-light fw-light">Informacje Dodatkowe </span>
                                                    <i class="bi bi-info-lg text-success"></i>
                                                </div>
                                                <div class="ms-3 formatuj-maly-font">
                                                    <i class="bi bi-stack text-warning"></i>
                                                    <span class="text-secondary fw-lighter">{{post_data['InformacjeDodatkowe']}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}

                                    </div>
                                    <div class="row row-cols-2">
                                        
                                        

                                        {% if post_data['Metraz']!=0 %}
                                        <div class="col">
                                            <div class="border border-1 border-secondary rounded m-1 p-2 formatuj-hover">
                                                <div class="mb-2">
                                                    <span class="text-light fw-light">Metraż</span>
                                                </div>
                                                <div class="ms-3 formatuj-maly-font">
                                                    <i class="bi bi-house-check text-info"></i>
                                                    <span class="text-secondary fw-lighter">{{post_data['Metraz']}} m&sup2;</span>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                        {% if post_data['LiczbaPokoi']!=0 %}
                                        <div class="col">
                                            <div class="border border-1 border-secondary rounded m-1 p-2 formatuj-hover">
                                                <div class="mb-2">
                                                    <span class="text-light fw-light">Liczba Pokoi</span>
                                                </div>
                                                <div class="ms-3 formatuj-maly-font">
                                                    <i class="bi bi-house-check text-warning"></i>
                                                    <span class="text-secondary fw-lighter">{{post_data['LiczbaPokoi']}} </span>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                        {% if post_data['Kaucja']!=0 %}
                                        <div class="col">
                                            <div class="border border-1 border-secondary rounded m-1 p-2 formatuj-hover">
                                                <div class="mb-2">
                                                    <span class="text-light fw-light">Kaucja</span>
                                                </div>
                                                <div class="ms-3 formatuj-maly-font">
                                                    <i class="bi bi-cash text-warning"></i>
                                                    <span class="text-secondary fw-lighter">{{post_data['Kaucja']}} PLN</span>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                        {% if post_data['Czynsz']!=0 %}
                                        <div class="col">
                                            <div class="border border-1 border-secondary rounded m-1 p-2 formatuj-hover">
                                                <div class="mb-2">
                                                    <span class="text-light fw-light">Czynsz</span>
                                                </div>
                                                <div class="ms-3 formatuj-maly-font">
                                                    <i class="bi bi-cash text-success"></i>
                                                    <span class="text-secondary fw-lighter">{{post_data['Czynsz']}} PLN</span>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                        {% if post_data['LiczbaPieter']!=0 %}
                                        <div class="col">
                                            <div class="border border-1 border-secondary rounded m-1 p-2 formatuj-hover">
                                                <div class="mb-2">
                                                    <span class="text-light fw-light">Liczba Pięter</span>
                                                </div>
                                                <div class="ms-3 formatuj-maly-font">
                                                    <i class="bi bi-cash text-success"></i>
                                                    <span class="text-secondary fw-lighter">{{post_data['LiczbaPieter']}} </span>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                        {% if post_data['PowierzchniaDzialki']!=0 %}
                                        <div class="col">
                                            <div class="border border-1 border-secondary rounded m-1 p-2 formatuj-hover">
                                                <div class="mb-2">
                                                    <span class="text-light fw-light">Powierzchnia Dzialki</span>
                                                </div>
                                                <div class="ms-3 formatuj-maly-font">
                                                    <i class="bi bi-app-indicator text-info"></i>
                                                    <span class="text-secondary fw-lighter">{{post_data['PowierzchniaDzialki']}} m&sup2;</span>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                        {% if post_data['TechBudowy']!='' %}
                                        <div class="col">
                                            <div class="border border-1 border-secondary rounded m-1 p-2 formatuj-hover">
                                                <div class="mb-2">
                                                    <span class="text-light fw-light">Technologia Budowy</span>
                                                </div>
                                                <div class="ms-3 formatuj-maly-font">
                                                    <i class="bi bi-house-gear text-success"></i>
                                                    <span class="text-secondary fw-lighter">{{post_data['TechBudowy']}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                        {% if post_data['Umeblowanie']!='' %}
                                        <div class="col">
                                            <div class="border border-1 border-secondary rounded m-1 p-2 formatuj-hover">
                                                <div class="mb-2">
                                                    <span class="text-light fw-light">Umeblowanie</span>
                                                </div>
                                                <div class="ms-3 formatuj-maly-font">
                                                    <i class="bi bi-house-heart text-info"></i>
                                                    <span class="text-secondary fw-lighter">{{post_data['Umeblowanie']}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                        {% if post_data['FormaKuchni']!='' %}
                                        <div class="col">
                                            <div class="border border-1 border-secondary rounded m-1 p-2 formatuj-hover">
                                                <div class="mb-2">
                                                    <span class="text-light fw-light">Forma Kuchni</span>
                                                </div>
                                                <div class="ms-3 formatuj-maly-font">
                                                    <i class="bi bi-house-heart text-info"></i>
                                                    <span class="text-secondary fw-lighter">{{post_data['FormaKuchni']}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                        {% if post_data['TypDomu']!='' %}
                                        <div class="col">
                                            <div class="border border-1 border-secondary rounded m-1 p-2 formatuj-hover">
                                                <div class="mb-2">
                                                    <span class="text-light fw-light">Rodzaj Nieruchomości </span>
                                                </div>
                                                <div class="ms-3 formatuj-maly-font">
                                                    <i class="bi bi-house text-info"></i>
                                                    <span class="text-secondary fw-lighter">{{post_data['TypDomu']}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                        {% if post_data['StanWykonczenia']!='' %}
                                        <div class="col">
                                            <div class="border border-1 border-secondary rounded m-1 p-2 formatuj-hover">
                                                <div class="mb-2">
                                                    <span class="text-light fw-light">Stan Wykończenia</span>
                                                </div>
                                                <div class="ms-3 formatuj-maly-font">
                                                    <i class="bi bi-house-check text-info"></i>
                                                    <span class="text-secondary fw-lighter">{{post_data['StanWykonczenia']}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                        {% if post_data['RokBudowy']!=0 %}
                                        <div class="col">
                                            <div class="border border-1 border-secondary rounded m-1 p-2 formatuj-hover">
                                                <div class="mb-2">
                                                    <span class="text-light fw-light">Rok Budowy</span>
                                                </div>
                                                <div class="ms-3 formatuj-maly-font">
                                                    <i class="bi bi-calendar3 text-info"></i>
                                                    <span class="text-secondary fw-lighter">{{post_data['RokBudowy']}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                        {% if post_data['NumerKW']!='' %}
                                        <div class="col">
                                            <div class="border border-1 border-secondary rounded m-1 p-2 formatuj-hover">
                                                <div class="mb-2">
                                                    <span class="text-light fw-light">Numer KW</span>
                                                </div>
                                                <div class="ms-3 formatuj-maly-font">
                                                    <i class="bi bi-journal-text text-success"></i>
                                                    <span class="text-secondary fw-lighter">{{post_data['NumerKW']}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                        {% if post_data['RodzajZabudowy']!='' %}
                                        <div class="col">
                                            <div class="border border-1 border-secondary rounded m-1 p-2 formatuj-hover">
                                                <div class="mb-2">
                                                    <span class="text-light fw-light">Rodzaj Zabudowy</span>
                                                </div>
                                                <div class="ms-3 formatuj-maly-font">
                                                    <i class="bi bi-stack text-warning"></i>
                                                    <span class="text-secondary fw-lighter">{{post_data['RodzajZabudowy']}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                    </div>
                                    
                                </div>
                                
                                
                            </div>

                        </div>

                        <!-- collapse end -->
                        {% endfor %}
                        <!-- Paginacja -->
                        <span class="formatuj-maly-logout">{{ pagination.info }}</span>
                        <div class="pagination formatuj-margin-top">
                            <nav aria-label="Page navigation example">                            
                                <ul class="pagination justify-content-center dark-mode">
                                    <li class="page-item">{{ pagination.prev }}</li>
                                    <li class="page-item">{{ pagination.links }}</li>
                                    <li class="page-item">{{ pagination.next }}</li>
                                </ul>
                            </nav>
                        </div>
{% endblock %}
{% block bottom_script %}
<script>
    class FotoDropBox {
        constructor(formId) {
            if (!this.checkDragAndDropSupport()) {
                alert('Przeglądarka nie obsługuje funkcji przeciągania i upuszczania plików.');
                return;
            }
            this.dropArea = document.getElementById(`${formId}-drop-area`);
            this.fileList = document.getElementById(`${formId}-fileList`);
            this.accumulatedFiles = [];

            this.initEventListeners();
        }
        checkDragAndDropSupport() {
            const div = document.createElement('div');
            return ('draggable' in div) || ('ondragstart' in div && 'ondrop' in div);
        }

        initEventListeners() {
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                this.dropArea.addEventListener(eventName, (e) => this.preventDefaults(e), false);
            });

            ['dragenter', 'dragover'].forEach(eventName => {
                this.dropArea.addEventListener(eventName, () => this.highlight(), false);
            });

            ['dragleave', 'drop'].forEach(eventName => {
                this.dropArea.addEventListener(eventName, () => this.unhighlight(), false);
            });

            this.dropArea.addEventListener('drop', (e) => this.handleDrop(e), false);
        }

        preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        highlight() {
            this.dropArea.classList.add('highlight');
        }

        unhighlight() {
            this.dropArea.classList.remove('highlight');
        }

        handleDrop(e) {
            this.preventDefaults(e);
            let dt = e.dataTransfer;
            let files = dt.files;
            this.updateFileList(files);
        }
        
        handleDropImg(event) {
            event.preventDefault();
            let files = event.dataTransfer.files; // Pobierz pliki z obiektu DataTransfer
            let list = document.getElementById(formId + '-fileList');

            for (let i = 0; i < files.length; i++) {
                let file = files[i];
                let li = document.createElement('li');
                li.textContent = file.name + " (" + (file.size / 1024).toFixed(1) + " KB)"; // Dodaj informacje o pliku
                li.file = file; // Kluczowe: Przypisz obiekt File do elementu li
                list.appendChild(li);
            }
        }

        updateFileList(newFiles) {
            for (let file of newFiles) {
                if (this.accumulatedFiles.length >= 10) {
                    alert('Osiągnięto limit 10 plików.');
                    break;
                }
                if (!this.isFileUnique(file)) {
                    alert('Plik ' + file.name + ' jest już na liście.');
                    continue;
                }
                this.accumulatedFiles.push(file);
            }
            this.displayFiles();
        }

        isFileUnique(newFile) {
            return !this.accumulatedFiles.some(file => 
                file.name === newFile.name &&
                file.size === newFile.size &&
                this.getFileExtension(file.name) === this.getFileExtension(newFile.name)
            );
        }

        displayFiles() {
            this.fileList.innerHTML = '';  // Wyczyść istniejące wpisy
            this.accumulatedFiles.forEach((file, index) => {
                const li = document.createElement('li');
                li.file = file;  // Przypisz plik do elementu li dla łatwego dostępu

                if (file.type.startsWith('image/')) {
                    const img = document.createElement('img');
                    img.src = URL.createObjectURL(file);
                    img.onload = () => { URL.revokeObjectURL(img.src); };
                    img.style.height = '50px';
                    img.style.marginRight = '10px';
                    img.classList.add('img-thumbnail', 'object-fit-cover', 'rounded', 'bg-dark');
                    li.appendChild(img);
                } else {
                    alert('Plik ' + file.name + ' nie jest zdjęciem.');
                    return;  // Nie dodawaj plików, które nie są obrazami
                }

                // li.appendChild(document.createTextNode(`${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)`));
                li.appendChild(document.createTextNode(`${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB, ${this.getFileExtension(file.name)})`));
                if (file.size > 2097200) {
                    li.style.color = '#fd0f2b'; // czerwony, jeśli plik jest większy niż 2 MB
                } else if (file.size > 1048576) {
                    li.style.color = '#ff9900'; // pomarańczowy, jeśli plik jest większy niż 1 MB, ale mniejszy lub równy 2 MB
                } else {
                    li.style.color = '#00ff00'; // zielony, jeśli plik jest mniejszy niż 1 MB
                }
                li.classList.add('list-group-item', 'formatuj-bg-dropbox-list');
                this.fileList.appendChild(li);

                const closeButton = document.createElement('button');
                closeButton.classList.add('drop-box-close-button', 'btn-close', 'btn-close-white', 'float-end');
                closeButton.setAttribute('aria-label', 'Close');
                closeButton.addEventListener('click', () => this.removeFile(index));
                li.appendChild(closeButton);
            });
        }
        


        removeFile(index) {
            this.accumulatedFiles.splice(index, 1); // Usuń element z tablicy
            this.displayFiles(); // Ponownie wyświetl listę plików bez usuniętego elementu
        }

        getFileExtension(filename) {
            return filename.slice((filename.lastIndexOf(".") - 1 >>> 0) + 2);
        }
    }

    function openGoogleEarthAddress(inputId) {
        // Pobranie wartości z pola input o zadanym id
        var address_str = document.getElementById(inputId).value.trim();

        // Sprawdzenie, czy pole nie jest puste
        if (address_str === "") {
            alert("Proszę wpisać adres w odpowiednie pole.");
            return; // Przerywanie funkcji, jeśli pole jest puste
        }

        // Zamiana spacji na plusy (+) w adresie
        var formattedAddress = address_str.replace(/ /g, '+');

        // Ustawienie cech okna, które zostanie otwarte
        var features = "toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=no,resizable=yes,width=900,height=600";

        // Otwarcie nowego okna z Google Earth z wyszukanym adresem
        var newWindow = window.open(`https://earth.google.com/web/search/${formattedAddress}`, "DemoWindow", features);
    }

    function extractAndDisplayCoords(link_id, gps_div_id, formID) {
        // Pobranie wartości z pola input
        var url = document.getElementById(link_id).value.trim();

        // Sprawdzenie, czy pole nie jest puste
        if (url === "") {
            alert("Proszę wpisać link GPS.");
            return; // Przerywanie funkcji, jeśli pole jest puste
        }

        // Sprawdzenie, czy URL zawiera '@'
        if (!url.includes('@')) {
            alert("Podany link nie zawiera poprawnych danych GPS.");
            return; // Przerywanie funkcji, jeśli URL jest niepoprawny
        }

        // Ekstrakcja szerokości i długości geograficznej
        var coords = url.split('@')[1];
        var parts = coords.split(',');
        if (parts.length < 2) {
            alert("Nieprawidłowy format danych GPS.");
            return; // Przerywanie funkcji, jeśli dane są niepełne
        }
        var lat = parts[0];
        var lon = parts[1];

        // Sprawdzenie, czy wartości koordynatów można przekonwertować na liczby
        if (isNaN(parseFloat(lat)) || isNaN(parseFloat(lon))) {
            alert("Podane wartości nie są prawidłowymi koordynatami GPS.");
            return; // Przerywanie funkcji, jeśli koordynaty nie są liczbami
        }

        // Wyświetlenie wyników w elemencie div o id 'GPS_9999999'
        var displayDiv = document.getElementById(gps_div_id);
        displayDiv.innerHTML = "GPS: " + lat + " <i class='bi bi-geo-alt-fill'></i> " + lon;

        // Tworzenie ukrytych pól input dla szerokości i długości geograficznej
        var latInput = document.createElement('input');
        latInput.type = 'hidden';
        latInput.id = 'lat_' + formID;
        latInput.name = 'lat_' + formID;
        latInput.value = lat;

        var lonInput = document.createElement('input');
        lonInput.type = 'hidden';
        lonInput.id = 'lon_' + formID;
        lonInput.name = 'lon_' + formID;
        lonInput.value = lon;

        // Dodanie ukrytych inputów do tego samego elementu div, w którym są wyświetlane koordynaty
        displayDiv.appendChild(latInput);
        displayDiv.appendChild(lonInput);
    }
    function fillInput(elementId, value) {
        const element = document.getElementById(elementId);
        if (element) {
            element.value = value; // Przypisz wartość do elementu
        } else {
            console.error('Element o ID ' + elementId + ' nie istnieje.');
        }
    }

</script>
{% endblock %}
{% block footer %}
 To jest stopka panelu administracyjnego. All right reserved &copy; 2024 by DMD Panel Administratora.<br/>
{% endblock %}