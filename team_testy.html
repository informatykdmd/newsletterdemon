<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Ustawianie Pracowników</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.14.0/Sortable.min.js"></script>
<style>
  body {
    background-color: #1c1c1c;
    color: #e0e0e0;
  }

  .list {
    min-height: 100px;
    padding: 10px;
    background-color: #2c2c2c;
    border: 1px solid #444;
    border-radius: 5px;
  }

  .highlight {
    background-color: #0056b3; /* Niebieski akcent */
  }

  .dostepnyPracownik {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
    padding: 10px;
    border-radius: 5px;
    border: 1px solid #555;
    background-color: #333;
    color: #e0e0e0;
  }

  .dostepnyPracownik:hover {
    background-color: #3a3a3a;
  }

  .avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 10px;
    background-size: cover;
    background-position: center;
    background-color: #007bff; /* Niebieski odcień dla avatarów */
  }
</style>
<script>
  // Funkcja przypisująca obrazy do elementów
  function assignImagesToElements() {
      document.querySelectorAll('.dostepnyPracownik').forEach(pracownik => {
          const imageUrl = pracownik.getAttribute("data-image-url");
          if (imageUrl) {
              pracownik.querySelector('.avatar').style.backgroundImage = `url('${imageUrl}')`;
          }
      });
  }
  
  // Aktualizacja podświetlenia i przypisywanie awatarów
  function updateHighlight() {
    const highlightLimit = 3;
    Array.from(document.getElementById('onPage').children).forEach((item, index) => {
      item.classList.toggle('highlight', index < highlightLimit);
    });
  }
  
  document.addEventListener('DOMContentLoaded', assignImagesToElements);
</script>
</head>
<body class="container-fluid">

<div class="row">
  <div class="col-md-6">
    <h3>Pracownicy dostępni</h3>
    <div id="available" class="list border">
      {% for member in members['home'] + members['team'] %}
      {% set member_photo = photos_dict[member] %}
      <div class="dostepnyPracownik" data-image-url="{{member_photo}}">
        <div class="avatar"></div>
        <span>{{member}}</span>
      </div>
      {% endfor %}
    </div>
  </div>

  <div class="col-md-6">
    <h3>Pracownicy na stronie</h3>
    <div id="onPage" class="list border">
      {% for member in members['available'] %}
      {% set member_photo = photos_dict[member] %}
      <div class="dostepnyPracownik" data-image-url="{{member_photo}}">
        <div class="avatar"></div>
        <span>{{member}}</span>
      </div>
      {% endfor %}
    </div>
  </div>
</div>

<script>
  const availableList = document.getElementById('available');
  const onPageList = document.getElementById('onPage');

  new Sortable(availableList, { 
    group: 'employees', 
    animation: 150,
    onAdd: (evt) => evt.item.classList.remove('highlight')
  });

  new Sortable(onPageList, { 
    group: 'employees', 
    animation: 150,
    onSort: updateHighlight
  });
</script>

</body>
</html>
